<!DOCTYPE html>
<html>
<head>
</head>
<body th:fragment="leftsidebar">
  <a href="../home"><button class="rounded-lg bg-blue-900 text-xl p-2" type=button>Accueil</button></a><br>
  <div th:if="${session.isLogged==true}">
    <a href="../messages"><button class="rounded-lg bg-blue-900 text-xl p-2" type=button>Messages</button></a><br>
      <a href="../profile"><button class="rounded-lg bg-blue-900 text-xl p-2" type=button>Profil</button></a><br>
      <a href="../logout"><button class="rounded-lg bg-blue-900 text-xl p-2" type=button>Se d√©connecter</button></a><br>
  </div>
  <div th:unless="${session.isLogged==true}">
    <a href="../login"><button class="rounded-lg bg-blue-900 text-xl p-2" type=button>Se connecter</button></a><br>
  </div>
  <div th:if="${session.isLogged==true}">
    <button class="rounded-lg bg-blue-900 text-2xl p-2" onclick="twotter()" type=button>Twoter</button>
    <form class="border-2 p-2 rounded-lg mt-2 w-4/5 md:w-3/5 bg-blue-700 mx-auto top-1/4 left-auto md:left-1/4" style="
          position:fixed;
          height:auto;
          z-index:100;
          display:none;" method="post" id="twotterform">
      <textarea id="twottextarea" class="resize-none border-none bg-blue-900 w-full" name="text" placeholder="Quoi de neuf ?" required></textarea>
      <input type="hidden" name="id" th:value="${session.userid}" />
      <button type="button" onclick="sendtwot()" class="rounded-lg bg-blue-900 w-full">Twoter</button>
    </form>
    <button onclick="hide()"><div id="overlay-back0" style="position   : fixed;
                top        : 0;
                left       : 0;
                width      : 100%;
                height     : 100%;
                background : #000;
                opacity    : 0.6;
                filter     : alpha(opacity=60);
                z-index    : 5;
                display    : none;"></div></button>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
      function twotter() {
        $('#twotterform, #overlay-back0').fadeIn(500);
      }
      function hide(){
        $('#twotterform, #overlay-back0').fadeOut(500);
      }
      var twotform=document.getElementById("twotterform");
      function sendtwot(){
        var response = fetch('../resttwot', {
          method: 'POST',
          body: new FormData(twotform)
        });
        document.getElementById("twottextarea").value="";
        hide();
      }
    </script>
  </div>
</body>
</html>